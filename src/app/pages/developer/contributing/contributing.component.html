<div class="doc-page">
    <h1>üë∑ Gu√≠a de Contribuci√≥n</h1>
    <p class="lead">¬°Gracias por tu inter√©s en contribuir a CuidaColitasAPP! Esta gu√≠a te ayudar√° a configurar tu
        entorno de desarrollo y seguir las mejores pr√°cticas del proyecto.</p>

    <app-info-card type="success" title="Bienvenido al Equipo üéâ">
        <p>Tu contribuci√≥n ayuda a mejorar la experiencia de cl√≠nicas veterinarias y propietarios de mascotas. Cada
            l√≠nea de c√≥digo cuenta!</p>
    </app-info-card>

    <!-- Prerrequisitos -->
    <section class="doc-section">
        <h2>üìã Prerrequisitos</h2>
        <p>Antes de comenzar, aseg√∫rate de tener instalado lo siguiente en tu entorno local:</p>

        <div class="requirements-grid">
            <div class="requirement-card">
                <span class="req-icon"><i class="fas fa-box"></i></span>
                <h4>Node.js</h4>
                <p>Versi√≥n LTS recomendada: <strong>v18+</strong></p>
                <a href="https://nodejs.org/" target="_blank">Descargar Node.js</a>
            </div>

            <div class="requirement-card">
                <span class="req-icon">üîß</span>
                <h4>Git</h4>
                <p>Sistema de control de versiones</p>
                <a href="https://git-scm.com/" target="_blank">Descargar Git</a>
            </div>

            <div class="requirement-card">
                <span class="req-icon"><i class="fas fa-bolt"></i></span>
                <h4>Expo CLI</h4>
                <p>Aunque usamos <code>npx</code>, es √∫til tenerlo global</p>
                <code>npm install -g expo-cli</code>
            </div>

            <div class="requirement-card">
                <span class="req-icon">üì±</span>
                <h4>Expo Go App</h4>
                <p>Instala en tu dispositivo m√≥vil</p>
                <p>Disponible en Play Store / App Store</p>
            </div>

            <div class="requirement-card optional">
                <span class="req-icon">üíª</span>
                <h4>Emulador (Opcional)</h4>
                <p><strong>Android Studio</strong> (Android Emulator)</p>
                <p><strong>Xcode</strong> (iOS Simulator - Solo macOS)</p>
            </div>
        </div>
    </section>

    <!-- Configuraci√≥n del Proyecto -->
    <section class="doc-section">
        <h2><i class="fas fa-rocket"></i> Configuraci√≥n del Proyecto (Setup)</h2>
        <p>Sigue estos pasos para configurar el proyecto en tu m√°quina local:</p>

        <h3>1. Clonar el Repositorio</h3>
        <p>Obt√©n una copia local del c√≥digo fuente:</p>
        <app-code-block language="bash" [code]="cloneCommand"></app-code-block>

        <h3>2. Instalar Dependencias</h3>
        <p>Instala todos los paquetes de Node.js necesarios:</p>
        <app-code-block language="bash" [code]="installCommand"></app-code-block>

        <app-info-card type="tip" title="Tiempo de Instalaci√≥n">
            <p>La primera instalaci√≥n puede tomar varios minutos dependiendo de tu conexi√≥n a internet. ¬°Ten paciencia!
            </p>
        </app-info-card>

        <h3>3. Configurar Variables de Entorno</h3>
        <p>El proyecto utiliza <strong>Supabase</strong> como backend. Necesitas crear un archivo <code>.env</code>
            en la ra√≠z del proyecto para conectar la aplicaci√≥n.</p>

        <h4>Pasos:</h4>
        <ol>
            <li>Crea un archivo llamado <code>.env</code> en la ra√≠z del proyecto</li>
            <li>Agrega las siguientes claves (solic√≠talas al administrador del proyecto si no las tienes):</li>
        </ol>

        <app-code-block language="bash" [code]="envTemplate"></app-code-block>

        <app-info-card type="warning" title="Seguridad Cr√≠tica ‚ö†Ô∏è">
            <p><strong>NUNCA</strong> subas el archivo <code>.env</code> al repositorio. Este archivo ya est√° incluido
                en <code>.gitignore</code> por seguridad.</p>
            <p>Las credenciales de producci√≥n solo debe conocerlas el equipo de administraci√≥n.</p>
        </app-info-card>

        <h3>4. Ejecutar la Aplicaci√≥n</h3>
        <p>Para iniciar el servidor de desarrollo de Metro Bundler:</p>
        <app-code-block language="bash" [code]="startCommand"></app-code-block>

        <h4>Opciones de Visualizaci√≥n:</h4>
        <ul>
            <li><i class="fas fa-mobile-alt"></i> <strong>Dispositivo Real:</strong> Escanea el c√≥digo QR con la app
                Expo Go</li>
            <li><i class="fab fa-android"></i> <strong>Android Emulator:</strong> Presiona <code>a</code> en la terminal
            </li>
            <li><i class="fab fa-apple"></i> <strong>iOS Simulator:</strong> Presiona <code>i</code> en la terminal
                (Solo macOS)</li>
            <li><i class="fas fa-globe"></i> <strong>Web Browser:</strong> Presiona <code>w</code> en la terminal</li>
        </ul>
    </section>

    <!-- Estructura del C√≥digo -->
    <section class="doc-section">
        <h2>üìÇ Estructura del C√≥digo</h2>
        <p>Es fundamental mantener el orden establecido en el proyecto para facilitar el mantenimiento y la
            colaboraci√≥n:</p>

        <div class="structure-table">
            <table>
                <thead>
                    <tr>
                        <th>Directorio</th>
                        <th>Prop√≥sito</th>
                        <th>Reglas</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>src/api/</code></td>
                        <td>Conexiones externas</td>
                        <td>Solo archivos de integraci√≥n (Supabase Client, APIs externas)</td>
                    </tr>
                    <tr>
                        <td><code>src/components/</code></td>
                        <td>Componentes reutilizables</td>
                        <td>
                            <ul>
                                <li><code>shared/</code> - Componentes gen√©ricos</li>
                                <li><code>client/</code> - Espec√≠ficos del rol Cliente</li>
                                <li><code>vet/</code> - Espec√≠ficos del rol Veterinario</li>
                                <li><code>admin/</code> - Espec√≠ficos del rol Admin</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td><code>src/hooks/</code></td>
                        <td>L√≥gica de negocio</td>
                        <td><strong>TODA</strong> la l√≥gica de peticiones a BD va aqu√≠. No hagas fetches directos en
                            componentes visuales</td>
                    </tr>
                    <tr>
                        <td><code>src/screens/</code></td>
                        <td>Pantallas de navegaci√≥n</td>
                        <td>Vistas completas que aparecen en la navegaci√≥n principal</td>
                    </tr>
                    <tr>
                        <td><code>src/theme/</code></td>
                        <td>Estilos globales</td>
                        <td>Colores, fuentes, y constantes de dise√±o</td>
                    </tr>
                    <tr>
                        <td><code>src/context/</code></td>
                        <td>Estado global</td>
                        <td>React Context para autenticaci√≥n, configuraci√≥n, etc.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <app-info-card type="info" title="Principio de Separaci√≥n de Responsabilidades">
            <p>Cada archivo debe tener <strong>una √∫nica responsabilidad</strong>. Los componentes solo renderizan UI,
                los hooks manejan datos, y el contexto gestiona estado global.</p>
        </app-info-card>
    </section>

    <!-- Est√°ndares de C√≥digo -->
    <section class="doc-section">
        <h2>üé® Est√°ndares de C√≥digo</h2>
        <p>Seguir estos est√°ndares asegura que el c√≥digo sea <strong>legible</strong>, <strong>mantenible</strong> y
            <strong>consistente</strong> en todo el proyecto.
        </p>

        <h3>React Native & Hooks</h3>
        <div class="standards-list">
            <div class="standard-item">
                <h4>‚úÖ Usa Componentes Funcionales</h4>
                <p>Siempre utiliza componentes funcionales con Hooks (<code>useState</code>, <code>useEffect</code>).
                    No uses componentes de clase.</p>
                <app-code-block language="javascript" [code]="functionalComponentExample"></app-code-block>
            </div>

            <div class="standard-item">
                <h4>‚úÖ Separa la L√≥gica del UI</h4>
                <p>No escribas l√≥gica compleja dentro del JSX. Extr√°ela a un Custom Hook en
                    <code>src/hooks/</code>.
                </p>
                <app-code-block language="javascript" [code]="customHookExample"></app-code-block>
            </div>

            <div class="standard-item">
                <h4>‚úÖ Async/Await Siempre</h4>
                <p>Usa <code>async/await</code> para todas las promesas y peticiones a Supabase.</p>
                <app-code-block language="javascript" [code]="asyncAwaitExample"></app-code-block>
            </div>
        </div>

        <h3>Estilos (Styling)</h3>
        <ul>
            <li>‚úÖ Usa <code>StyleSheet.create()</code> al final del archivo</li>
            <li>‚úÖ Importa estilos globales de <code>src/theme/theme.js</code> cuando aplique</li>
            <li>‚ùå Evita estilos en l√≠nea (<code>style={{ "{{ width: 100 }}" }}</code>) salvo casos excepcionales de
                dinamismo</li>
        </ul>

        <app-code-block language="javascript" [code]="styleSheetExample"></app-code-block>

        <h3>Convenciones de Nombres (Naming Conventions)</h3>
        <div class="naming-table">
            <table>
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Convenci√≥n</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Componentes</td>
                        <td><strong>PascalCase</strong></td>
                        <td><code>BotonGuardar.js</code>, <code>PetCard.js</code></td>
                    </tr>
                    <tr>
                        <td>Funciones/Hooks</td>
                        <td><strong>camelCase</strong></td>
                        <td><code>useAuth.js</code>, <code>calcularEdad.js</code></td>
                    </tr>
                    <tr>
                        <td>Variables</td>
                        <td><strong>camelCase</strong></td>
                        <td><code>userProfile</code>, <code>petList</code></td>
                    </tr>
                    <tr>
                        <td>Constantes</td>
                        <td><strong>UPPER_SNAKE_CASE</strong></td>
                        <td><code>MAX_RETRY_COUNT</code>, <code>API_TIMEOUT</code></td>
                    </tr>
                    <tr>
                        <td>Archivos CSS/Estilos</td>
                        <td><strong>camelCase</strong></td>
                        <td><code>homeScreen.css</code>, <code>theme.js</code></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <!-- Flujo de Trabajo Git -->
    <section class="doc-section">
        <h2><i class="fas fa-code-branch"></i> Flujo de Trabajo (Git Flow)</h2>
        <p>Trabajamos con un flujo de ramas (<strong>branching strategy</strong>) para mantener la rama
            <code>main</code> siempre estable y lista para producci√≥n.
        </p>

        <app-info-card type="warning" title="Regla de Oro">
            <p><strong>NUNCA trabajes directamente en la rama <code>main</code></strong>. Siempre crea una rama nueva
                para tu tarea.</p>
        </app-info-card>

        <h3>1. Crear una Rama (Branch)</h3>
        <p>Usa nombres descriptivos siguiendo estos prefijos:</p>

        <div class="branch-types">
            <div class="branch-type">
                <code>feature/nombre-funcionalidad</code>
                <p>Para nuevas funcionalidades o caracter√≠sticas</p>
            </div>
            <div class="branch-type">
                <code>fix/descripcion-error</code>
                <p>Para correcci√≥n de errores (bugs)</p>
            </div>
            <div class="branch-type">
                <code>docs/nombre-doc</code>
                <p>Para cambios en documentaci√≥n</p>
            </div>
            <div class="branch-type">
                <code>refactor/nombre-mejora</code>
                <p>Para mejoras de c√≥digo sin cambiar funcionalidad</p>
            </div>
        </div>

        <h4>Ejemplo:</h4>
        <app-code-block language="bash" [code]="branchExample"></app-code-block>

        <h3>2. Commits</h3>
        <p>Escribe mensajes de commit <strong>claros y descriptivos</strong>. Usa el formato de Conventional Commits:
        </p>

        <div class="commit-examples">
            <div class="commit-good">
                <h4>‚úÖ Buenos Commits</h4>
                <ul>
                    <li><code>feat: agrega pantalla de historial m√©dico</code></li>
                    <li><code>fix: corrige error de login en Android</code></li>
                    <li><code>docs: actualiza gu√≠a de contribuci√≥n</code></li>
                    <li><code>refactor: optimiza hook usePets</code></li>
                    <li><code>style: ajusta espaciado en header</code></li>
                </ul>
            </div>
            <div class="commit-bad">
                <h4>‚ùå Malos Commits</h4>
                <ul>
                    <li><code>arreglando cosas</code></li>
                    <li><code>cambios</code></li>
                    <li><code>update</code></li>
                    <li><code>fix bug</code></li>
                </ul>
            </div>
        </div>

        <h4>Prefijos de Commit:</h4>
        <ul>
            <li><code>feat:</code> Nueva funcionalidad</li>
            <li><code>fix:</code> Correcci√≥n de error</li>
            <li><code>docs:</code> Cambios en documentaci√≥n</li>
            <li><code>style:</code> Cambios de formato (espacios, indentaci√≥n)</li>
            <li><code>refactor:</code> Refactorizaci√≥n de c√≥digo</li>
            <li><code>test:</code> Agregar o modificar tests</li>
            <li><code>chore:</code> Tareas de mantenimiento</li>
        </ul>

        <h3>3. Pull Request (PR)</h3>
        <p>Cuando termines tu tarea, es momento de integrar tus cambios al proyecto principal:</p>

        <ol>
            <li><strong>Verifica que la app funciona:</strong> Ejecuta <code>npx expo start</code> y prueba tu
                funcionalidad</li>
            <li><strong>Sube tus cambios:</strong>
                <app-code-block language="bash" [code]="pushBranchCommand"></app-code-block>
            </li>
            <li><strong>Abre un Pull Request en GitHub</strong> hacia la rama <code>main</code></li>
            <li><strong>Completa la descripci√≥n del PR:</strong>
                <ul>
                    <li>Qu√© hace tu cambio</li>
                    <li>Por qu√© es necesario</li>
                    <li>Adjunta capturas de pantalla si hay cambios visuales</li>
                    <li>Lista los issues que resuelve (ej. "Closes #42")</li>
                </ul>
            </li>
        </ol>

        <h4>Template de PR:</h4>
        <app-code-block language="markdown" [code]="prTemplate"></app-code-block>

        <app-info-card type="tip" title="Revisi√≥n de C√≥digo">
            <p>Tu PR ser√° revisado por otros miembros del equipo. Est√° abierto a recibir comentarios y sugerencias.
                ¬°Es parte del proceso de mejora continua!</p>
        </app-info-card>
    </section>

    <!-- Base de Datos -->
    <section class="doc-section">
        <h2>üõ† Base de Datos (Supabase)</h2>
        <p>Si necesitas modificar la estructura de la base de datos (crear tablas, cambiar columnas, agregar √≠ndices),
            sigue estos pasos:</p>

        <app-info-card type="warning" title="Precauci√≥n con Producci√≥n ‚ö†Ô∏è">
            <p><strong>NO hagas cambios manuales directamente en la base de datos de producci√≥n.</strong> Siempre usa
                migraciones.</p>
        </app-info-card>

        <h3>Proceso de Migraciones:</h3>
        <ol>
            <li>Crea un archivo de migraci√≥n SQL en <code>supabase/migrations/</code> con el formato:
                <br><code>YYYYMMDD_descripcion_cambio.sql</code>
                <br>Ejemplo: <code>20240315_add_specialty_to_vets.sql</code>
            </li>
            <li>Escribe el SQL necesario para el cambio</li>
            <li>Documenta el cambio en el Pull Request</li>
            <li>Los administradores aplicar√°n la migraci√≥n en entornos de prueba y producci√≥n</li>
        </ol>

        <h4>Ejemplo de Migraci√≥n:</h4>
        <app-code-block language="sql" [code]="migrationExample"></app-code-block>
    </section>

    <!-- Reporte de Bugs -->
    <section class="doc-section">
        <h2>üêû Reporte de Bugs</h2>
        <p>Si encuentras un error en la aplicaci√≥n, ay√∫danos a solucionarlo report√°ndolo correctamente:</p>

        <h3>Pasos para Reportar:</h3>
        <ol>
            <li>Ve a la pesta√±a <strong>"Issues"</strong> en el repositorio de GitHub</li>
            <li>Crea un nuevo Issue con el template de "Bug Report"</li>
            <li>Incluye la siguiente informaci√≥n:</li>
        </ol>

        <h4>Informaci√≥n Necesaria:</h4>
        <div class="bug-report-template">
            <h5>üìù Descripci√≥n del Error</h5>
            <p>Descripci√≥n clara y concisa de qu√© sali√≥ mal.</p>

            <h5><i class="fas fa-redo"></i> Pasos para Reproducir</h5>
            <ol>
                <li>Ve a '...'</li>
                <li>Haz clic en '...'</li>
                <li>Despl√°zate hacia '...'</li>
                <li>Observa el error</li>
            </ol>

            <h5>‚úÖ Comportamiento Esperado</h5>
            <p>Describe qu√© deber√≠a haber pasado.</p>

            <h5>üì± Entorno</h5>
            <ul>
                <li><strong>Dispositivo:</strong> Samsung Galaxy S21 / iPhone 13 / Emulador</li>
                <li><strong>OS Version:</strong> Android 12 / iOS 16</li>
                <li><strong>App Version:</strong> 1.2.0</li>
            </ul>

            <h5>üì∏ Capturas de Pantalla</h5>
            <p>Adjunta capturas del error si es posible.</p>
        </div>
    </section>

    <!-- Recursos Adicionales -->
    <section class="doc-section">
        <h2>üìö Recursos Adicionales</h2>

        <div class="resources-grid">
            <div class="resource-item">
                <h4>üìñ Documentaci√≥n Oficial</h4>
                <ul>
                    <li><a href="https://reactnative.dev/docs/getting-started" target="_blank">React Native Docs</a>
                    </li>
                    <li><a href="https://docs.expo.dev/" target="_blank">Expo Documentation</a></li>
                    <li><a href="https://supabase.com/docs" target="_blank">Supabase Docs</a></li>
                </ul>
            </div>

            <div class="resource-item">
                <h4>üí¨ Comunicaci√≥n del Equipo</h4>
                <p>√önete a nuestros canales de comunicaci√≥n:</p>
                <ul>
                    <li>Discord / Slack del proyecto</li>
                    <li>GitHub Discussions</li>
                </ul>
            </div>

            <div class="resource-item">
                <h4>üéì Aprende M√°s</h4>
                <ul>
                    <li><a href="/developer/architecture">Arquitectura del Sistema</a></li>
                    <li><a href="/developer/api">API Reference</a></li>
                    <li><a href="/technical/database">Estructura de Base de Datos</a></li>
                </ul>
            </div>
        </div>
    </section>

    <app-info-card type="success" title="¬°Tu Ayuda Hace la Diferencia!">
        <p>Cada contribuci√≥n, grande o peque√±a, hace que <strong>CuidaColitasAPP</strong> sea mejor cada d√≠a. Gracias
            por formar parte de este proyecto que ayuda a mejorar el cuidado de las mascotas.</p>
        <p><em>¬°Feliz coding!</em></p>
    </app-info-card>
</div>